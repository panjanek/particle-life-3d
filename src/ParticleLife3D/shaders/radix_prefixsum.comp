#version 430
layout(local_size_x = 16) in;

layout(std430, binding = 4) buffer Histogram { uint hist[]; };
layout(std430, binding = 5) buffer Offsets   { uint offs[]; };

void main()
{
    uint id = gl_LocalInvocationID.x;

    uint sum = 0;
    for (uint i = 0; i < id; ++i)
        sum += hist[i];

    offs[id] = sum;
}
